{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"filename\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _db = _interopRequireDefault(require(\"./db.js\"));\n\nvar _auth = _interopRequireDefault(require(\"./auth.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n_dotenv[\"default\"].config();\n\nvar BSON = require('bson');\n\nvar app = (0, _express[\"default\"])();\nvar port = 3000;\napp.use((0, _cors[\"default\"])());\napp.use(_express[\"default\"].json());\napp.get(\"/posts/:id\", /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(req, res) {\n    var id, db, doc;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = req.params.id;\n            _context.next = 3;\n            return (0, _db[\"default\"])();\n\n          case 3:\n            db = _context.sent;\n            _context.next = 6;\n            return db.collection(\"posts\").findOne({\n              _id: new BSON.ObjectId(id)\n            });\n\n          case 6:\n            doc = _context.sent;\n            console.log(doc);\n            res.json(doc);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.get(\"/posts\", /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(req, res) {\n    var db, query, selekcija, pretraga, terms, atributi, cursor, results;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context2.sent;\n            query = req.query;\n            selekcija = {};\n\n            if (query.title) {\n              selekcija.title = new RegExp(query.title);\n            }\n\n            if (query._any) {\n              pretraga = query._any;\n              terms = pretraga.split(\" \");\n              atributi = [\"title\", \"text\", \"photo\"];\n              selekcija = {\n                $and: []\n              };\n              terms.forEach(function (term) {\n                var or = {\n                  $or: []\n                };\n                atributi.forEach(function (atribut) {\n                  or.$or.push(_defineProperty({}, atribut, new RegExp(term)));\n                });\n                selekcija.$and.push(or);\n              });\n            }\n\n            console.log(\"Selekcija\", selekcija);\n            _context2.next = 10;\n            return db.collection(\"posts\").find(selekcija);\n\n          case 10:\n            cursor = _context2.sent;\n            _context2.next = 13;\n            return cursor.toArray();\n\n          case 13:\n            results = _context2.sent;\n            res.json(results);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.get(\"/tajna\", [_auth[\"default\"].verify], function (req, res) {\n  res.json({\n    message: \"Ovo je tajna \" + req.jwt.username\n  });\n});\napp.post(\"/auth\", /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(req, res) {\n    var user, result;\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            user = req.body;\n            _context3.prev = 1;\n            _context3.next = 4;\n            return _auth[\"default\"].authenticateUser(user.username, user.password);\n\n          case 4:\n            result = _context3.sent;\n            res.json(result);\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.prev = 8;\n            _context3.t0 = _context3[\"catch\"](1);\n            res.status(401).json({\n              error: _context3.t0.message\n            });\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 8]]);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}());\napp.post(\"/users\", /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(req, res) {\n    var user, id;\n    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            user = req.body;\n\n            try {\n              id = _auth[\"default\"].registerUser(user);\n            } catch (e) {\n              res.status(500).json({\n                error: e.message\n              });\n            }\n\n            res.json({\n              id: id\n            });\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp.get(\"/\", function (req, res) {\n  res.send(\"Hello world u browser\");\n  console.log(\"Hello world u konzolu\");\n});\napp.post('/BMI', /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(req, res) {\n    var db, BMI, result;\n    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context5.sent;\n            BMI = req.body;\n            console.log(BMI);\n            /*let kvadrat_visine = BPI.visina*BPI.visina;\r\n            let BPI_zbroj = BPI.broj/kvadrat_visine\r\n            BPI = BPI_zbroj;*/\n            //let final = JSON.stringify({BPI})\n            //console.log(final)\n            //let random =(Math.round(Math.random()*1000))/100;\n            //BPI._id = random;\n\n            _context5.next = 7;\n            return db.collection('BMI').insertOne(BMI);\n\n          case 7:\n            result = _context5.sent;\n            console.log(\"Evo rezultata: \", result);\n\n            if (result.insertedCount == 1) {\n              res.send({\n                status: 'success',\n                id: result.insertedId\n              });\n            } else {\n              res.send({\n                status: 'fail'\n              });\n            }\n\n            console.log(result);\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.get('/raspored', /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(req, res) {\n    var db, cursor, results;\n    return regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context6.sent;\n            _context6.next = 5;\n            return db.collection('raspored').find({});\n\n          case 5:\n            cursor = _context6.sent;\n            _context6.next = 8;\n            return cursor.toArray();\n\n          case 8:\n            results = _context6.sent;\n            res.send(results);\n\n          case 10:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.get(\"/BMI\", /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(req, res) {\n    var db, cursor, results;\n    return regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return (0, _db[\"default\"])();\n\n          case 2:\n            db = _context7.sent;\n            _context7.next = 5;\n            return db.collection('BMI').find({});\n\n          case 5:\n            cursor = _context7.sent;\n            _context7.next = 8;\n            return cursor.toArray();\n\n          case 8:\n            results = _context7.sent;\n            res.send(results);\n\n          case 10:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x13, _x14) {\n    return _ref7.apply(this, arguments);\n  };\n}());\napp.get(\"/BMI/:id\", /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(req, res) {\n    var id, db, doc;\n    return regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            id = req.params.id;\n            console.log(\"id: \", id);\n            _context8.next = 4;\n            return (0, _db[\"default\"])();\n\n          case 4:\n            db = _context8.sent;\n            _context8.next = 7;\n            return db.collection(\"BMI\").findOne({\n              _id: new BSON.ObjectId(id)\n            });\n\n          case 7:\n            doc = _context8.sent;\n            console.log(doc);\n            res.json(doc);\n\n          case 10:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n\n  return function (_x15, _x16) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.listen(port, function () {\n  return console.log(\"Slusam na portu \".concat(port, \"!\"));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsIkJTT04iLCJyZXF1aXJlIiwiYXBwIiwicG9ydCIsInVzZSIsImV4cHJlc3MiLCJqc29uIiwiZ2V0IiwicmVxIiwicmVzIiwiaWQiLCJwYXJhbXMiLCJkYiIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiX2lkIiwiT2JqZWN0SWQiLCJkb2MiLCJjb25zb2xlIiwibG9nIiwicXVlcnkiLCJzZWxla2NpamEiLCJ0aXRsZSIsIlJlZ0V4cCIsIl9hbnkiLCJwcmV0cmFnYSIsInRlcm1zIiwic3BsaXQiLCJhdHJpYnV0aSIsIiRhbmQiLCJmb3JFYWNoIiwidGVybSIsIm9yIiwiJG9yIiwiYXRyaWJ1dCIsInB1c2giLCJmaW5kIiwiY3Vyc29yIiwidG9BcnJheSIsInJlc3VsdHMiLCJhdXRoIiwidmVyaWZ5IiwibWVzc2FnZSIsImp3dCIsInVzZXJuYW1lIiwicG9zdCIsInVzZXIiLCJib2R5IiwiYXV0aGVudGljYXRlVXNlciIsInBhc3N3b3JkIiwicmVzdWx0Iiwic3RhdHVzIiwiZXJyb3IiLCJyZWdpc3RlclVzZXIiLCJlIiwic2VuZCIsIkJNSSIsImluc2VydE9uZSIsImluc2VydGVkQ291bnQiLCJpbnNlcnRlZElkIiwibGlzdGVuIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7O0FBTEFBLG1CQUFPQyxNQUFQOztBQU1BLElBQU1DLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBR0EsSUFBTUMsR0FBRyxHQUFHLDBCQUFaO0FBQ0EsSUFBTUMsSUFBSSxHQUFHLElBQWI7QUFFQUQsR0FBRyxDQUFDRSxHQUFKLENBQVEsdUJBQVI7QUFDQUYsR0FBRyxDQUFDRSxHQUFKLENBQVFDLG9CQUFRQyxJQUFSLEVBQVI7QUFFQUosR0FBRyxDQUFDSyxHQUFKLENBQVEsWUFBUjtBQUFBLHFFQUFzQixpQkFBTUMsR0FBTixFQUFVQyxHQUFW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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFBckMsR0FBRyxDQUFDSyxHQUFKLENBQVEsVUFBUjtBQUFBLHNFQUFvQixrQkFBTUMsR0FBTixFQUFVQyxHQUFWO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNaQyxZQUFBQSxFQURZLEdBQ1BGLEdBQUcsQ0FBQ0csTUFBSixDQUFXRCxFQURKO0FBRWhCUSxZQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxNQUFaLEVBQW1CVCxFQUFuQjtBQUZnQjtBQUFBLG1CQUlELHFCQUpDOztBQUFBO0FBSVpFLFlBQUFBLEVBSlk7QUFBQTtBQUFBLG1CQU1BQSxFQUFFLENBQUNDLFVBQUgsQ0FBYyxLQUFkLEVBQXFCQyxPQUFyQixDQUE2QjtBQUFDQyxjQUFBQSxHQUFHLEVBQUUsSUFBSWYsSUFBSSxDQUFDZ0IsUUFBVCxDQUFrQk4sRUFBbEI7QUFBTixhQUE3QixDQU5BOztBQUFBO0FBTVpPLFlBQUFBLEdBTlk7QUFPaEJDLFlBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixHQUFaO0FBQ0FSLFlBQUFBLEdBQUcsQ0FBQ0gsSUFBSixDQUFTVyxHQUFUOztBQVJnQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxHQUFwQjs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVdBZixHQUFHLENBQUMwRCxNQUFKLENBQVd6RCxJQUFYLEVBQWlCO0FBQUEsU0FBS2UsT0FBTyxDQUFDQyxHQUFSLDJCQUErQmhCLElBQS9CLE9BQUw7QUFBQSxDQUFqQiIsInNvdXJjZVJvb3QiOiJEOlxcRG9rdW1lbnRpXFxQcm9qZWN0c1xcV0EtUHJvamVrdFxcVEFIX0JhY2tlbmRcXHNyY1xcIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XHJcbmltcG9ydCBjb25uZWN0IGZyb20gXCIuL2RiLmpzXCI7XHJcbmltcG9ydCBhdXRoIGZyb20gXCIuL2F1dGguanNcIjtcclxuY29uc3QgQlNPTiA9IHJlcXVpcmUoJ2Jzb24nKTtcclxuXHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IHBvcnQgPSAzMDAwO1xyXG5cclxuYXBwLnVzZShjb3JzKCkpXHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5cclxuYXBwLmdldChcIi9wb3N0cy86aWRcIiwgYXN5bmMocmVxLHJlcyk9PntcclxuICAgIGxldCBpZCA9IHJlcS5wYXJhbXMuaWQ7XHJcbiAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcblxyXG4gICAgbGV0IGRvYyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJwb3N0c1wiKS5maW5kT25lKHtfaWQ6IG5ldyBCU09OLk9iamVjdElkKGlkKX0pXHJcbiAgICBjb25zb2xlLmxvZyhkb2MpO1xyXG4gICAgcmVzLmpzb24oZG9jKTtcclxufSlcclxuXHJcblxyXG5hcHAuZ2V0KFwiL3Bvc3RzXCIsIGFzeW5jKHJlcSxyZXMpPT57XHJcbiAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KClcclxuICAgIGxldCBxdWVyeSA9IHJlcS5xdWVyeTtcclxuXHJcbiAgICBsZXQgc2VsZWtjaWphID0ge31cclxuXHJcbiAgICBpZiAocXVlcnkudGl0bGUpe1xyXG4gICAgICAgIHNlbGVrY2lqYS50aXRsZSA9IG5ldyBSZWdFeHAocXVlcnkudGl0bGUpXHJcbiAgICB9XHJcblxyXG4gICAgaWYocXVlcnkuX2FueSl7XHJcbiAgICAgICAgbGV0IHByZXRyYWdhID0gcXVlcnkuX2FueVxyXG4gICAgICAgIGxldCB0ZXJtcyA9IHByZXRyYWdhLnNwbGl0KFwiIFwiKVxyXG5cclxuICAgICAgICBsZXQgYXRyaWJ1dGkgPSBbXCJ0aXRsZVwiLCBcInRleHRcIiwgXCJwaG90b1wiXVxyXG4gICAgXHJcbiAgICAgICAgc2VsZWtjaWphID0ge1xyXG4gICAgICAgICAgICAkYW5kOiBbXVxyXG4gICAgICAgIH1cclxuICAgIHRlcm1zLmZvckVhY2godGVybSA9PiB7XHJcbiAgICAgICAgbGV0IG9yID0ge1xyXG4gICAgICAgICAgICAkb3I6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgYXRyaWJ1dGkuZm9yRWFjaChhdHJpYnV0ID0+e1xyXG4gICAgICAgICAgICBvci4kb3IucHVzaCh7IFthdHJpYnV0XTogbmV3IFJlZ0V4cCh0ZXJtKX0pXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc2VsZWtjaWphLiRhbmQucHVzaChvcilcclxuICAgIH0pIFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiU2VsZWtjaWphXCIsIHNlbGVrY2lqYSlcclxuXHJcbiAgICBsZXQgY3Vyc29yID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInBvc3RzXCIpLmZpbmQoc2VsZWtjaWphKVxyXG4gICAgbGV0IHJlc3VsdHMgPSBhd2FpdCBjdXJzb3IudG9BcnJheSgpXHJcblxyXG4gICAgcmVzLmpzb24ocmVzdWx0cylcclxufSlcclxuXHJcbmFwcC5nZXQoXCIvdGFqbmFcIiwgW2F1dGgudmVyaWZ5XSwgKHJlcSxyZXMpPT57XHJcbiAgIFxyXG4gICAgcmVzLmpzb24oe21lc3NhZ2U6XCJPdm8gamUgdGFqbmEgXCIgKyByZXEuand0LnVzZXJuYW1lfSk7XHJcbn0pXHJcblxyXG5hcHAucG9zdChcIi9hdXRoXCIsIGFzeW5jIChyZXEscmVzKT0+e1xyXG4gICAgbGV0IHVzZXIgPSByZXEuYm9keTtcclxuXHJcbiAgICB0cnl7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGF1dGguYXV0aGVudGljYXRlVXNlcih1c2VyLnVzZXJuYW1lLCB1c2VyLnBhc3N3b3JkKVxyXG4gICAgICAgIHJlcy5qc29uKHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaChlKXtcclxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7ZXJyb3I6ZS5tZXNzYWdlfSk7XHJcbiAgICB9XHJcbiAgICBcclxufSlcclxuXHJcbmFwcC5wb3N0KFwiL3VzZXJzXCIsIGFzeW5jIChyZXEscmVzKT0+e1xyXG4gICAgbGV0IHVzZXIgPSByZXEuYm9keTtcclxuXHJcbiAgICBsZXQgaWQ7XHJcbiAgICB0cnl7XHJcbiAgICBpZCA9IGF1dGgucmVnaXN0ZXJVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goZSl7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe2Vycm9yOmUubWVzc2FnZX0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmpzb24oe2lkOmlkfSk7XHJcbiAgICBcclxufSlcclxuXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEscmVzKT0+e1xyXG4gICAgcmVzLnNlbmQoXCJIZWxsbyB3b3JsZCB1IGJyb3dzZXJcIilcclxuICAgIGNvbnNvbGUubG9nKFwiSGVsbG8gd29ybGQgdSBrb256b2x1XCIpXHJcbn0pXHJcblxyXG5hcHAucG9zdCAoJy9CTUknLCBhc3luYyAocmVxICwgcmVzKSA9PiB7XHJcbiAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcbiAgICBsZXQgQk1JID0gcmVxLmJvZHk7XHJcbiAgICBjb25zb2xlLmxvZyhCTUkpO1xyXG4gICAgLypsZXQga3ZhZHJhdF92aXNpbmUgPSBCUEkudmlzaW5hKkJQSS52aXNpbmE7XHJcbiAgICBsZXQgQlBJX3picm9qID0gQlBJLmJyb2ova3ZhZHJhdF92aXNpbmVcclxuICAgIEJQSSA9IEJQSV96YnJvajsqL1xyXG4gICAgLy9sZXQgZmluYWwgPSBKU09OLnN0cmluZ2lmeSh7QlBJfSlcclxuICAgIC8vY29uc29sZS5sb2coZmluYWwpXHJcbiAgICAvL2xldCByYW5kb20gPShNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMCkpLzEwMDtcclxuICAgIC8vQlBJLl9pZCA9IHJhbmRvbTtcclxuICAgIFxyXG4gICAgbGV0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ0JNSScpLmluc2VydE9uZShCTUkpO1xyXG4gICAgY29uc29sZS5sb2coXCJFdm8gcmV6dWx0YXRhOiBcIixyZXN1bHQpO1xyXG4gICAgaWYgKHJlc3VsdC5pbnNlcnRlZENvdW50ID09IDEpIHtcclxuICAgICAgICByZXMuc2VuZCh7XHJcbiAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBpZDogcmVzdWx0Lmluc2VydGVkSWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IFxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVzLnNlbmQoe1xyXG4gICAgICAgICAgICBzdGF0dXM6ICdmYWlsJyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxufSk7XHJcblxyXG5hcHAuZ2V0ICgnL3Jhc3BvcmVkJywgYXN5bmMgKHJlcSAsIHJlcykgPT4ge1xyXG4gICAgbGV0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xyXG4gICAgbGV0IGN1cnNvciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Jhc3BvcmVkJykuZmluZCh7fSk7XHJcbiAgICBsZXQgcmVzdWx0cyA9IGF3YWl0IGN1cnNvci50b0FycmF5KCk7XHJcblxyXG4gICAgcmVzLnNlbmQocmVzdWx0cyk7XHJcbn0pO1xyXG5cclxuYXBwLmdldChcIi9CTUlcIiwgYXN5bmMocmVxLHJlcyk9PntcclxuICAgIGxldCBkYiA9IGF3YWl0IGNvbm5lY3QoKTtcclxuICAgIGxldCBjdXJzb3IgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdCTUknKS5maW5kKHt9KTtcclxuICAgIGxldCByZXN1bHRzID0gYXdhaXQgY3Vyc29yLnRvQXJyYXkoKTtcclxuXHJcbiAgICByZXMuc2VuZChyZXN1bHRzKTtcclxufSlcclxuXHJcbmFwcC5nZXQoXCIvQk1JLzppZFwiLCBhc3luYyhyZXEscmVzKT0+e1xyXG4gICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDtcclxuICAgIGNvbnNvbGUubG9nKFwiaWQ6IFwiLGlkKTtcclxuXHJcbiAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcblxyXG4gICAgbGV0IGRvYyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJCTUlcIikuZmluZE9uZSh7X2lkOiBuZXcgQlNPTi5PYmplY3RJZChpZCl9KVxyXG4gICAgY29uc29sZS5sb2coZG9jKTtcclxuICAgIHJlcy5qc29uKGRvYyk7XHJcbn0pXHJcblxyXG5hcHAubGlzdGVuKHBvcnQsICgpPT4gY29uc29sZS5sb2coYFNsdXNhbSBuYSBwb3J0dSAke3BvcnR9IWApKTsiXX0=","map":{"version":3,"sources":["index.js"],"names":["dotenv","config","BSON","require","app","port","use","express","json","get","req","res","id","params","db","collection","findOne","_id","ObjectId","doc","console","log","query","selekcija","title","RegExp","_any","pretraga","terms","split","atributi","$and","forEach","term","or","$or","atribut","push","find","cursor","toArray","results","auth","verify","message","jwt","username","post","user","body","authenticateUser","password","result","status","error","registerUser","e","send","BMI","insertOne","insertedCount","insertedId","listen"],"mappings":"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","sourceRoot":"D:\\Dokumenti\\Projects\\WA-Projekt\\TAH_Backend\\src\\","sourcesContent":["import dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\nimport express from \"express\";\r\nimport cors from \"cors\";\r\nimport connect from \"./db.js\";\r\nimport auth from \"./auth.js\";\r\nconst BSON = require('bson');\r\n\r\n\r\nconst app = express();\r\nconst port = 3000;\r\n\r\napp.use(cors())\r\napp.use(express.json());\r\n\r\napp.get(\"/posts/:id\", async(req,res)=>{\r\n    let id = req.params.id;\r\n    let db = await connect();\r\n\r\n    let doc = await db.collection(\"posts\").findOne({_id: new BSON.ObjectId(id)})\r\n    console.log(doc);\r\n    res.json(doc);\r\n})\r\n\r\n\r\napp.get(\"/posts\", async(req,res)=>{\r\n    let db = await connect()\r\n    let query = req.query;\r\n\r\n    let selekcija = {}\r\n\r\n    if (query.title){\r\n        selekcija.title = new RegExp(query.title)\r\n    }\r\n\r\n    if(query._any){\r\n        let pretraga = query._any\r\n        let terms = pretraga.split(\" \")\r\n\r\n        let atributi = [\"title\", \"text\", \"photo\"]\r\n    \r\n        selekcija = {\r\n            $and: []\r\n        }\r\n    terms.forEach(term => {\r\n        let or = {\r\n            $or: []\r\n        }\r\n    \r\n        atributi.forEach(atribut =>{\r\n            or.$or.push({ [atribut]: new RegExp(term)})\r\n        })\r\n\r\n        selekcija.$and.push(or)\r\n    }) \r\n    }\r\n\r\n    console.log(\"Selekcija\", selekcija)\r\n\r\n    let cursor = await db.collection(\"posts\").find(selekcija)\r\n    let results = await cursor.toArray()\r\n\r\n    res.json(results)\r\n})\r\n\r\napp.get(\"/tajna\", [auth.verify], (req,res)=>{\r\n   \r\n    res.json({message:\"Ovo je tajna \" + req.jwt.username});\r\n})\r\n\r\napp.post(\"/auth\", async (req,res)=>{\r\n    let user = req.body;\r\n\r\n    try{\r\n        let result = await auth.authenticateUser(user.username, user.password)\r\n        res.json(result);\r\n    }\r\n    catch(e){\r\n        res.status(401).json({error:e.message});\r\n    }\r\n    \r\n})\r\n\r\napp.post(\"/users\", async (req,res)=>{\r\n    let user = req.body;\r\n\r\n    let id;\r\n    try{\r\n    id = auth.registerUser(user);\r\n    }\r\n    catch(e){\r\n        res.status(500).json({error:e.message});\r\n    }\r\n    res.json({id:id});\r\n    \r\n})\r\n\r\napp.get(\"/\", (req,res)=>{\r\n    res.send(\"Hello world u browser\")\r\n    console.log(\"Hello world u konzolu\")\r\n})\r\n\r\napp.post ('/BMI', async (req , res) => {\r\n    let db = await connect();\r\n    let BMI = req.body;\r\n    console.log(BMI);\r\n    /*let kvadrat_visine = BPI.visina*BPI.visina;\r\n    let BPI_zbroj = BPI.broj/kvadrat_visine\r\n    BPI = BPI_zbroj;*/\r\n    //let final = JSON.stringify({BPI})\r\n    //console.log(final)\r\n    //let random =(Math.round(Math.random()*1000))/100;\r\n    //BPI._id = random;\r\n    \r\n    let result = await db.collection('BMI').insertOne(BMI);\r\n    console.log(\"Evo rezultata: \",result);\r\n    if (result.insertedCount == 1) {\r\n        res.send({\r\n            status: 'success',\r\n            id: result.insertedId,\r\n        });\r\n    } \r\n    else {\r\n        res.send({\r\n            status: 'fail',\r\n        });\r\n    }\r\n    \r\n    console.log(result);\r\n});\r\n\r\napp.get ('/raspored', async (req , res) => {\r\n    let db = await connect();\r\n    let cursor = await db.collection('raspored').find({});\r\n    let results = await cursor.toArray();\r\n\r\n    res.send(results);\r\n});\r\n\r\napp.get(\"/BMI\", async(req,res)=>{\r\n    let db = await connect();\r\n    let cursor = await db.collection('BMI').find({});\r\n    let results = await cursor.toArray();\r\n\r\n    res.send(results);\r\n})\r\n\r\napp.get(\"/BMI/:id\", async(req,res)=>{\r\n    let id = req.params.id;\r\n    console.log(\"id: \",id);\r\n\r\n    let db = await connect();\r\n\r\n    let doc = await db.collection(\"BMI\").findOne({_id: new BSON.ObjectId(id)})\r\n    console.log(doc);\r\n    res.json(doc);\r\n})\r\n\r\napp.listen(port, ()=> console.log(`Slusam na portu ${port}!`));"]}},"mtime":1653837953134},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"filename\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _db = _interopRequireDefault(require(\"./db.js\"));\n\nvar _bcrypt = _interopRequireDefault(require(\"bcrypt\"));\n\nvar _promises = require(\"bcrypt/promises\");\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _response = _interopRequireDefault(require(\"express/lib/response\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar _require = require(\"mongodb\"),\n    MongoClient = _require.MongoClient;\n\n_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n  var db;\n  return regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0, _db[\"default\"])();\n\n        case 2:\n          db = _context.sent;\n          _context.next = 5;\n          return db.collection(\"users\").createIndex({\n            username: 1\n          }, {\n            unique: true\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}))();\n\nvar _default = {\n  registerUser: function registerUser(userData) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n      var db, doc, result;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return (0, _db[\"default\"])();\n\n            case 2:\n              db = _context2.sent;\n              _context2.t0 = userData.name;\n              _context2.t1 = userData.username;\n              _context2.next = 7;\n              return _bcrypt[\"default\"].hash(userData.password, 8);\n\n            case 7:\n              _context2.t2 = _context2.sent;\n              doc = {\n                name: _context2.t0,\n                username: _context2.t1,\n                password: _context2.t2\n              };\n              _context2.prev = 9;\n              _context2.next = 12;\n              return db.collection(\"users\").insertOne(doc);\n\n            case 12:\n              result = _context2.sent;\n\n              if (!(result && result.insertedId)) {\n                _context2.next = 15;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", result.insertedId);\n\n            case 15:\n              _context2.next = 21;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t3 = _context2[\"catch\"](9);\n\n              if (!(_context2.t3.name == \"MongoError\" && _context2.t3.code == 11000)) {\n                _context2.next = 21;\n                break;\n              }\n\n              throw new Error(\"Korisnik vec postoji\");\n\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[9, 17]]);\n    }))();\n  },\n  authenticateUser: function authenticateUser(username, password) {\n    return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n      var db, user, token;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return (0, _db[\"default\"])();\n\n            case 2:\n              db = _context3.sent;\n              _context3.next = 5;\n              return db.collection(\"users\").findOne({\n                username: username\n              });\n\n            case 5:\n              user = _context3.sent;\n              _context3.t0 = user && user.password;\n\n              if (!_context3.t0) {\n                _context3.next = 11;\n                break;\n              }\n\n              _context3.next = 10;\n              return _bcrypt[\"default\"].compare(password, user.password);\n\n            case 10:\n              _context3.t0 = _context3.sent;\n\n            case 11:\n              if (!_context3.t0) {\n                _context3.next = 17;\n                break;\n              }\n\n              delete user.password;\n              token = _jsonwebtoken[\"default\"].sign(user, process.env.JWT_SECRET, {\n                algorithm: \"HS512\",\n                expiresIn: \"1 week\"\n              });\n              return _context3.abrupt(\"return\", {\n                token: token,\n                username: user.username\n              });\n\n            case 17:\n              throw new Error(\"Cannot authenticate\");\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  verify: function verify(req, res, next) {\n    try {\n      var authorization = req.headers.authorization.split(\" \");\n      var type = authorization[0];\n      var token = authorization[1];\n\n      if (type !== \"Bearer\") {\n        return res.status(401).send();\n      } else {\n        req.jwt = _jsonwebtoken[\"default\"].verify(token, process.env.JWT_SECRET);\n        return next();\n      }\n    } catch (e) {\n      return res.status(401).send();\n    }\n  }\n};\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsicmVxdWlyZSIsIk1vbmdvQ2xpZW50IiwiZGIiLCJjb2xsZWN0aW9uIiwiY3JlYXRlSW5kZXgiLCJ1c2VybmFtZSIsInVuaXF1ZSIsInJlZ2lzdGVyVXNlciIsInVzZXJEYXRhIiwibmFtZSIsImJjcnlwdCIsImhhc2giLCJwYXNzd29yZCIsImRvYyIsImluc2VydE9uZSIsInJlc3VsdCIsImluc2VydGVkSWQiLCJjb2RlIiwiRXJyb3IiLCJhdXRoZW50aWNhdGVVc2VyIiwiZmluZE9uZSIsInVzZXIiLCJjb21wYXJlIiwidG9rZW4iLCJqd3QiLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJhbGdvcml0aG0iLCJleHBpcmVzSW4iLCJ2ZXJpZnkiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYXV0aG9yaXphdGlvbiIsImhlYWRlcnMiLCJzcGxpdCIsInR5cGUiLCJzdGF0dXMiLCJzZW5kIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUxBLGVBQXNCQSxPQUFPLENBQUMsU0FBRCxDQUE3QjtBQUFBLElBQU9DLFdBQVAsWUFBT0EsV0FBUDs7QUFRQSx3REFBQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUNjLHFCQURkOztBQUFBO0FBQ0dDLFVBQUFBLEVBREg7QUFBQTtBQUFBLGlCQUVLQSxFQUFFLENBQUNDLFVBQUgsQ0FBYyxPQUFkLEVBQXVCQyxXQUF2QixDQUFtQztBQUFDQyxZQUFBQSxRQUFRLEVBQUM7QUFBVixXQUFuQyxFQUFnRDtBQUFDQyxZQUFBQSxNQUFNLEVBQUM7QUFBUixXQUFoRCxDQUZMOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLENBQUQ7O2VBS2U7QUFDTEMsRUFBQUEsWUFESyx3QkFDUUMsUUFEUixFQUNpQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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RCxNQUdJO0FBQ0FSLFFBQUFBLEdBQUcsQ0FBQ1IsR0FBSixHQUFVQSx5QkFBSU8sTUFBSixDQUFXUixLQUFYLEVBQWtCRyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFBOUIsQ0FBVjtBQUNBLGVBQU9NLElBQUksRUFBWDtBQUNIO0FBRUosS0FiRyxDQWFILE9BQU1PLENBQU4sRUFBUTtBQUNMLGFBQU9SLEdBQUcsQ0FBQ00sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLEVBQVA7QUFDQztBQUNKO0FBM0RNLEMiLCJzb3VyY2VSb290IjoiRDpcXERva3VtZW50aVxcUHJvamVjdHNcXFdBLVByb2pla3RcXFRBSF9CYWNrZW5kXFxzcmNcXCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKFwibW9uZ29kYlwiKTtcclxuaW1wb3J0IGNvbm5lY3QgZnJvbSBcIi4vZGIuanNcIjtcclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0XCI7XHJcbmltcG9ydCB7IHVzZSB9IGZyb20gXCJiY3J5cHQvcHJvbWlzZXNcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcbmltcG9ydCByZXMgZnJvbSBcImV4cHJlc3MvbGliL3Jlc3BvbnNlXCI7XHJcblxyXG5cclxuKGFzeW5jKCk9PntcclxubGV0IGRiID0gYXdhaXQgY29ubmVjdCgpO1xyXG5hd2FpdCBkYi5jb2xsZWN0aW9uKFwidXNlcnNcIikuY3JlYXRlSW5kZXgoe3VzZXJuYW1lOjF9LHt1bmlxdWU6dHJ1ZX0pO1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgYXN5bmMgcmVnaXN0ZXJVc2VyKHVzZXJEYXRhKXtcclxuICAgICAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KCk7XHJcblxyXG4gICAgICAgIGxldCBkb2MgPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyRGF0YS51c2VybmFtZSxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IGF3YWl0IGJjcnlwdC5oYXNoKHVzZXJEYXRhLnBhc3N3b3JkLCA4KSwgXHJcbiAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5pbnNlcnRPbmUoZG9jKVxyXG4gICAgICAgIGlmKHJlc3VsdCAmJiByZXN1bHQuaW5zZXJ0ZWRJZCl7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuaW5zZXJ0ZWRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoKGUpe1xyXG4gICAgICAgICAgICBpZihlLm5hbWUgPT0gXCJNb25nb0Vycm9yXCIgJiYgZS5jb2RlID09IDExMDAwKXtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIktvcmlzbmlrIHZlYyBwb3N0b2ppXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGFzeW5jIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWUsIHBhc3N3b3JkKXtcclxuICAgICAgICBsZXQgZGIgPSBhd2FpdCBjb25uZWN0KClcclxuICAgICAgICBsZXQgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHt1c2VybmFtZTp1c2VybmFtZX0pXHJcblxyXG4gICAgICAgIGlmICh1c2VyICYmIHVzZXIucGFzc3dvcmQgJiYgKGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkpe1xyXG4gICAgICAgICAgICAgZGVsZXRlIHVzZXIucGFzc3dvcmRcclxuICAgICAgICAgICAgbGV0IHRva2VuID0gand0LnNpZ24odXNlciwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCx7XHJcbiAgICAgICAgICAgICAgICBhbGdvcml0aG06IFwiSFM1MTJcIixcclxuICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogXCIxIHdlZWtcIixcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRva2VuLFxyXG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6dXNlci51c2VybmFtZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYXV0aGVudGljYXRlXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHZlcmlmeShyZXEscmVzLG5leHQpe1xyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGxldCBhdXRob3JpemF0aW9uID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgICAgIGxldCB0eXBlID0gYXV0aG9yaXphdGlvblswXTtcclxuICAgICAgICAgICAgbGV0IHRva2VuID0gYXV0aG9yaXphdGlvblsxXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKHR5cGUgIT09IFwiQmVhcmVyXCIpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5zZW5kKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgIHJlcS5qd3QgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICB9Y2F0Y2goZSl7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0iXX0=","map":{"version":3,"sources":["auth.js"],"names":["require","MongoClient","db","collection","createIndex","username","unique","registerUser","userData","name","bcrypt","hash","password","doc","insertOne","result","insertedId","code","Error","authenticateUser","findOne","user","compare","token","jwt","sign","process","env","JWT_SECRET","algorithm","expiresIn","verify","req","res","next","authorization","headers","split","type","status","send","e"],"mappings":"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","sourceRoot":"D:\\Dokumenti\\Projects\\WA-Projekt\\TAH_Backend\\src\\","sourcesContent":["const {MongoClient} = require(\"mongodb\");\r\nimport connect from \"./db.js\";\r\nimport bcrypt from \"bcrypt\";\r\nimport { use } from \"bcrypt/promises\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport res from \"express/lib/response\";\r\n\r\n\r\n(async()=>{\r\nlet db = await connect();\r\nawait db.collection(\"users\").createIndex({username:1},{unique:true});\r\n})();\r\n\r\nexport default {\r\n    async registerUser(userData){\r\n        let db = await connect();\r\n\r\n        let doc = {\r\n            name: userData.name,\r\n            username: userData.username,\r\n            password: await bcrypt.hash(userData.password, 8), \r\n        };\r\n                \r\n        try {\r\n        let result = await db.collection(\"users\").insertOne(doc)\r\n        if(result && result.insertedId){\r\n            return result.insertedId;\r\n        }\r\n        }\r\n        catch(e){\r\n            if(e.name == \"MongoError\" && e.code == 11000){\r\n                throw new Error(\"Korisnik vec postoji\")\r\n            }\r\n            \r\n        }\r\n    },\r\n    async authenticateUser(username, password){\r\n        let db = await connect()\r\n        let user = await db.collection(\"users\").findOne({username:username})\r\n\r\n        if (user && user.password && (await bcrypt.compare(password, user.password))){\r\n             delete user.password\r\n            let token = jwt.sign(user, process.env.JWT_SECRET,{\r\n                algorithm: \"HS512\",\r\n                expiresIn: \"1 week\",\r\n            })\r\n            return {\r\n                token,\r\n                username:user.username\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(\"Cannot authenticate\")\r\n        }\r\n    },\r\n    verify(req,res,next){\r\n            try{\r\n            let authorization = req.headers.authorization.split(\" \");\r\n            let type = authorization[0];\r\n            let token = authorization[1];\r\n            \r\n            if(type !== \"Bearer\"){\r\n                return res.status(401).send();\r\n            }\r\n            else{\r\n                req.jwt = jwt.verify(token, process.env.JWT_SECRET);\r\n                return next();\r\n            }\r\n        \r\n        }catch(e){\r\n            return res.status(401).send();\r\n            }\r\n        }\r\n\r\n    }"]}},"mtime":1648733541405},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"filename\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\\\\src\\\\db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Dokumenti\\\\Projects\\\\WA-Projekt\\\\TAH_Backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"proposal-class-static-block\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-private-property-in-object\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"proposal-numeric-separator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-logical-assignment-operators\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.8:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _require = require(\"mongodb\"),\n    MongoClient = _require.MongoClient;\n\nvar connection_string = \"mongodb+srv://rikii:admin@cluster0.nvyg7.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\";\nvar client = new MongoClient(connection_string, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\nvar db = null;\n\nvar _default = function _default() {\n  return new Promise(function (resolve, reject) {\n    if (db) {\n      resolve(db);\n    }\n\n    client.connect(function (err) {\n      if (err) {\n        reject(\"Doslo je do greske prilikom spajanja\" + err);\n      } else {\n        console.log(\"Uspjesno spajanje na bazu\");\n        db = client.db(\"TAH\");\n        resolve(db);\n      }\n    });\n  });\n};\n\nexports[\"default\"] = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiLmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJNb25nb0NsaWVudCIsImNvbm5lY3Rpb25fc3RyaW5nIiwiY2xpZW50IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiZGIiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsZUFBc0JBLE9BQU8sQ0FBQyxTQUFELENBQTdCO0FBQUEsSUFBT0MsV0FBUCxZQUFPQSxXQUFQOztBQUVBLElBQUlDLGlCQUFpQixHQUFFLGtHQUF2QjtBQUVBLElBQUlDLE1BQU0sR0FBRyxJQUFJRixXQUFKLENBQWdCQyxpQkFBaEIsRUFBbUM7QUFDNUNFLEVBQUFBLGVBQWUsRUFBRSxJQUQyQjtBQUU1Q0MsRUFBQUEsa0JBQWtCLEVBQUU7QUFGd0IsQ0FBbkMsQ0FBYjtBQUtBLElBQUlDLEVBQUUsR0FBRyxJQUFUOztlQUVlLG9CQUFLO0FBQ2hCLFNBQU8sSUFBSUMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFtQjtBQUVsQyxRQUFHSCxFQUFILEVBQU07QUFDRkUsTUFBQUEsT0FBTyxDQUFDRixFQUFELENBQVA7QUFDSDs7QUFFREgsSUFBQUEsTUFBTSxDQUFDTyxPQUFQLENBQWUsVUFBQUMsR0FBRyxFQUFFO0FBQ2hCLFVBQUdBLEdBQUgsRUFBTztBQUNIRixRQUFBQSxNQUFNLENBQUMseUNBQXlDRSxHQUExQyxDQUFOO0FBQ0gsT0FGRCxNQUdJO0FBQ0FDLFFBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDJCQUFaO0FBQ0FQLFFBQUFBLEVBQUUsR0FBR0gsTUFBTSxDQUFDRyxFQUFQLENBQVUsS0FBVixDQUFMO0FBQ0FFLFFBQUFBLE9BQU8sQ0FBQ0YsRUFBRCxDQUFQO0FBQ0g7QUFDSixLQVREO0FBVUgsR0FoQk0sQ0FBUDtBQWlCSCxDIiwic291cmNlUm9vdCI6IkQ6XFxEb2t1bWVudGlcXFByb2plY3RzXFxXQS1Qcm9qZWt0XFxUQUhfQmFja2VuZFxcc3JjXFwiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7TW9uZ29DbGllbnR9ID0gcmVxdWlyZShcIm1vbmdvZGJcIik7XHJcblxyXG5sZXQgY29ubmVjdGlvbl9zdHJpbmcgPVwibW9uZ29kYitzcnY6Ly9yaWtpaTphZG1pbkBjbHVzdGVyMC5udnlnNy5tb25nb2RiLm5ldC9teUZpcnN0RGF0YWJhc2U/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCI7XHJcblxyXG5sZXQgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KGNvbm5lY3Rpb25fc3RyaW5nLCB7XHJcbiAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXHJcbn0pXHJcblxyXG5sZXQgZGIgPSBudWxsO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgKCkgPT57XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcclxuXHJcbiAgICAgICAgaWYoZGIpe1xyXG4gICAgICAgICAgICByZXNvbHZlKGRiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xpZW50LmNvbm5lY3QoZXJyPT57XHJcbiAgICAgICAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoXCJEb3NsbyBqZSBkbyBncmVza2UgcHJpbGlrb20gc3BhamFuamFcIiArIGVycilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc3BqZXNubyBzcGFqYW5qZSBuYSBiYXp1XCIpXHJcbiAgICAgICAgICAgICAgICBkYiA9IGNsaWVudC5kYihcIlRBSFwiKVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcbiJdfQ==","map":{"version":3,"sources":["db.js"],"names":["require","MongoClient","connection_string","client","useNewUrlParser","useUnifiedTopology","db","Promise","resolve","reject","connect","err","console","log"],"mappings":";;;;;;;AAAA,eAAsBA,OAAO,CAAC,SAAD,CAA7B;AAAA,IAAOC,WAAP,YAAOA,WAAP;;AAEA,IAAIC,iBAAiB,GAAE,kGAAvB;AAEA,IAAIC,MAAM,GAAG,IAAIF,WAAJ,CAAgBC,iBAAhB,EAAmC;AAC5CE,EAAAA,eAAe,EAAE,IAD2B;AAE5CC,EAAAA,kBAAkB,EAAE;AAFwB,CAAnC,CAAb;AAKA,IAAIC,EAAE,GAAG,IAAT;;eAEe,oBAAK;AAChB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;AAElC,QAAGH,EAAH,EAAM;AACFE,MAAAA,OAAO,CAACF,EAAD,CAAP;AACH;;AAEDH,IAAAA,MAAM,CAACO,OAAP,CAAe,UAAAC,GAAG,EAAE;AAChB,UAAGA,GAAH,EAAO;AACHF,QAAAA,MAAM,CAAC,yCAAyCE,GAA1C,CAAN;AACH,OAFD,MAGI;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAP,QAAAA,EAAE,GAAGH,MAAM,CAACG,EAAP,CAAU,KAAV,CAAL;AACAE,QAAAA,OAAO,CAACF,EAAD,CAAP;AACH;AACJ,KATD;AAUH,GAhBM,CAAP;AAiBH,C","sourceRoot":"D:\\Dokumenti\\Projects\\WA-Projekt\\TAH_Backend\\src\\","sourcesContent":["const {MongoClient} = require(\"mongodb\");\r\n\r\nlet connection_string =\"mongodb+srv://rikii:admin@cluster0.nvyg7.mongodb.net/myFirstDatabase?retryWrites=true&w=majority\";\r\n\r\nlet client = new MongoClient(connection_string, {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true,\r\n})\r\n\r\nlet db = null;\r\n\r\nexport default () =>{\r\n    return new Promise((resolve, reject)=>{\r\n\r\n        if(db){\r\n            resolve(db)\r\n        }\r\n\r\n        client.connect(err=>{\r\n            if(err){\r\n                reject(\"Doslo je do greske prilikom spajanja\" + err)\r\n            }\r\n            else{\r\n                console.log(\"Uspjesno spajanje na bazu\")\r\n                db = client.db(\"TAH\")\r\n                resolve(db)\r\n            }\r\n        })\r\n    })\r\n}\r\n"]}},"mtime":1648484482649}}